/* =====================================================================
   style-dark.scss — "Midnight Library" (Cosmo Dark)
   基于 Gruvbox Dark。
   优化点：高对比度护眼文字、图片智能暗化、公告栏深底亮字。
   ===================================================================== */

/*-- scss:defaults --*/

/* --- 1. 核心配色 (High Contrast Warm) --- */
$body-bg:       #32302f; /* Soft Dark: 暖深灰，防拖影，护眼 */
$body-color:    #fdf4c1; /* Bright Cream: 极亮奶油色，确保宋体清晰可见 */
$primary:       #fe8019; /* Gruvbox Orange: 亮橙色主调 */

/* --- 2. 链接与高亮 --- */
$link-color:       #83a598; /* 灰蓝 */
$link-hover-color: #b8bb26; /* 亮绿 */
$mark-bg:          rgba(214, 93, 14, 0.4); 

/* --- 3. 导航栏 --- */
$navbar-bg:         #282828; /* Hard Dark */
$navbar-fg:         #fdf4c1;
$navbar-brand-color:#fdf4c1;

/* --- 4. 组件适配 --- */
$input-bg:                   #3c3836;
$input-color:                #fdf4c1;
$input-border-color:         #504945;
$input-focus-border-color:   #fe8019;

/* 分页 */
$pagination-color:               #fdf4c1;
$pagination-bg:                  transparent;
$pagination-border-color:        #504945;
$pagination-hover-bg:            #3c3836;
$pagination-active-bg:           #fe8019;
$pagination-active-border-color: #fe8019;
$pagination-active-color:        #282828;

/* --- 5. 形状与字体栈 --- */
$border-radius:      0.4rem;
$btn-border-radius:  0.4rem;

$font-family-sans-serif: 'Inter', 'Noto Sans SC', system-ui, -apple-system, sans-serif;
$font-family-serif:      'Noto Serif SC', 'Songti SC', 'Georgia', serif;


/*-- scss:rules --*/

/* =====================================================================
   A. 字体排版 (Typography)
   ===================================================================== */

/* 正文：清晰度优先 */
p {
  font-family: $font-family-serif;
  color: $body-color !important;
  
  /* [核心] 继承 Light 版的 500 字重，防止深色背景吞噬字体 */
  font-weight: 500; 
  
  /* 边缘增强 */
  -webkit-font-smoothing: antialiased; 
  -moz-osx-font-smoothing: grayscale;

  font-size: 1rem;     
  line-height: 1.8;      
  margin-bottom: 1.5rem;
  text-align: justify;   
}

/* 标题：温润的亮米色 */
h1, h2, h3, h4, h5, h6, .title {
  font-family: $font-family-sans-serif;
  color: #fbf1c7 !important; 
  font-weight: 700;
  letter-spacing: -0.02em;
}

/* 强调文字 */
strong, b {
  font-family: $font-family-sans-serif;
  font-weight: 700;
  color: #fe8019; 
}

/* 消除灰色文字陷阱 */
.text-muted, .quarto-title-meta-heading {
  color: #d5c4a1 !important; 
}

/* 选区 */
::selection {
  background: rgba(254, 128, 25, 0.4);
  color: #fbf1c7;
}

/* =====================================================================
   B. 公告栏 (Announcement) - 深底亮字
   ===================================================================== */

.quarto-announcement {
  background-color: #af3a03 !important; /* 深橙实底 */
  border-bottom: 1px solid #d65d0e !important;
  color: #fbf1c7 !important;
}

.quarto-announcement .quarto-announcement-content {
  color: #fbf1c7 !important;
  font-weight: 500;
}

.quarto-announcement a {
  color: #ffffff !important; /* 纯白链接 */
  text-decoration: underline !important;
  font-weight: 700;
}

.quarto-announcement .bi { color: #fbf1c7 !important; }
.quarto-announcement-close { color: rgba(255,255,255,0.7) !important; }
.quarto-announcement-close:hover { color: #fff !important; }

/* =====================================================================
   C. 导航栏 (Navbar)
   ===================================================================== */

.navbar {
  padding-top: 0.8rem;
  padding-bottom: 0.8rem;
  border-bottom: 1px solid #3c3836;
}

.navbar-nav .nav-link {
  font-family: $font-family-sans-serif;
  font-weight: 500;
  color: $navbar-fg !important;
  padding-left: 0.6rem !important;
  padding-right: 0.6rem !important;
}

.navbar-nav .nav-link:hover {
  color: #fe8019 !important;
}

.navbar-nav .bi {
  font-size: 1.2rem;
  vertical-align: -0.15em;
}

/* =====================================================================
   D. UI 组件 & 代码块
   ===================================================================== */

/* 代码块：深色背景，加微弱阴影和边框 */
pre {
  background-color: #282828; 
  border: 1px solid #3c3836; 
  border-radius: 6px;
  color: #ebdbb2;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.2); 
}

/* 行内代码 */
:not(pre) > code {
  background-color: #45403d !important; 
  color: #fdf4c1 !important; 
  padding: 0.1rem 0.3rem;
  border-radius: 4px;
  border: 1px solid #665c54;
}

/* 引用 */
blockquote {
  border-left: 4px solid #fe8019;
  background-color: rgba(60, 56, 54, 0.3);
  padding: 0.8rem 1.2rem;
  color: #d5c4a1;
  font-style: italic;
}

/* 表格 */
.table { color: $body-color; border-color: #504945; }
thead th { border-bottom: 2px solid #fe8019; color: #fbf1c7; }

/* =====================================================================
   E. 智能图片暗化
   ===================================================================== */
body.quarto-dark {
  --img-brightness: 0.85; 
  --img-contrast: 1.05;
  --img-saturate: 0.90;
}

body.quarto-dark img:not([src$=".svg"]):not(.no-shade):not([data-no-shade]):not(.emoji) {
  filter: brightness(var(--img-brightness)) contrast(var(--img-contrast)) saturate(var(--img-saturate));
  transition: filter 0.3s ease;
  border-radius: 4px;
}

body.quarto-dark img:hover { filter: none; }
.navbar img, .bi { filter: none !important; }

.column-margin.column-container p {
  margin-bottom: 0;
  font-size: 0.8rem; /* 脚注字体大小 */
}

#quarto-announcement p{
  color: black !important;
}
